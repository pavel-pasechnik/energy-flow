{"version":3,"file":"footer-239a1e2d.js","sources":["../../src/js/footer.js"],"sourcesContent":["// Імпортуємо функцію для відправки запитів \nimport { postRequest } from './api-energy-flow';\n\n// Імпортуємо бібліотеку для відображення повідомлень\nimport Swal from 'sweetalert2';\n\n// Стилі для повідомлень\nimport 'sweetalert2/src/sweetalert2.scss'; \n\n// Отримуємо шлях сторінки\nconst fullUrl = window.location.pathname;\n\n// Вирізаємо останню частину шляху \nconst lastSlashIndex = fullUrl.lastIndexOf('/');\nconst result = fullUrl.substring(lastSlashIndex);\n\n// Перевіряємо, що це головна сторінка\nif (result === '/index.html' || result === '/') {\n\n  // Знаходимо форму в футері\n  const footerForm = document.querySelector('#footer-form');\n\n  // Підписуємося на подію відправки форми\n  footerForm.addEventListener('submit', function(event) {\n    \n    // Відміняємо дефолтну поведінку\n    event.preventDefault();\n    \n    // Викликаємо функцію відправки запиту\n    submitForm();\n\n  });\n\n}\n\n// Функція відправки запиту\nasync function submitForm() {\n\n  // Змінна для збереження помилки\n  let error;\n  \n  // Отримуємо форму\n  const footerForm = document.querySelector('#footer-form');\n  \n  // Створюємо об'єкт з даними форми\n  const formData = new FormData(footerForm);\n  \n  // Отримуємо значення email\n  const emailValue = formData.get('footer-email');\n\n  // Формуємо об'єкт для відправки\n  const formattedData = {email: `${emailValue}`};\n\n  try {\n    \n    // Відправляємо POST запит\n    const response = await postRequest('/subscription', formattedData);\n    \n    // Отримуємо дані з відповіді\n    const data = response.data;\n\n    // Перевіряємо, чи немає помилки\n    if (data && !data.error) {\n\n      // Показуємо повідомлення про успіх  \n      showSuccess();\n\n      // Очищуємо форму\n      footerForm.reset();\n\n    }\n\n  } catch (err) {\n\n    // Зберігаємо помилку  \n    error = err;\n\n    // Показуємо помилку, якщо статус не 409\n    if (error.response && error.response.status !== 409) {\n      showError();\n    }\n\n  }\n  \n  // Перевіряємо, чи статус помилки 409\n  if (error && error.response && error.response.status === 409) {\n    showError409();\n  }\n\n}\n\n\n\nfunction showError() {\n\n  Swal.fire({\n\n    title: 'Bad request',\n\n    text: 'Something went wrong.',\n\n    icon: 'error',\n\n  });\n\n}\n\nfunction showError409() {\n\n  Swal.fire({\n\n    title: 'Warning!',\n\n    text: 'Subscription already exists',\n\n    icon: 'warning',\n\n  });\n\n}\n\nfunction showSuccess() {\n\n  Swal.fire({\n\n    title: 'Thank you for enrolling in our training program!',\n\n    text: \"We assure you of effective and top-notch training sessions that will exceed your expectations. Stick with us, and we guarantee you numerous exciting learning experiences.\",\n\n    icon: 'success',\n\n  });\n\n}\n"],"names":["fullUrl","lastSlashIndex","result","event","submitForm","error","footerForm","formattedData","data","postRequest","showSuccess","err","showError","showError409","Swal"],"mappings":"qGAUA,MAAMA,EAAU,OAAO,SAAS,SAG1BC,EAAiBD,EAAQ,YAAY,GAAG,EACxCE,EAASF,EAAQ,UAAUC,CAAc,GAG3CC,IAAW,eAAiBA,IAAW,MAGtB,SAAS,cAAc,cAAc,EAG7C,iBAAiB,SAAU,SAASC,EAAO,CAGpDA,EAAM,eAAc,EAGpBC,GAEJ,CAAG,EAKH,eAAeA,GAAa,CAG1B,IAAIC,EAGJ,MAAMC,EAAa,SAAS,cAAc,cAAc,EASlDC,EAAgB,CAAC,MAAO,GANb,IAAI,SAASD,CAAU,EAGZ,IAAI,cAAc,CAGH,EAAE,EAE7C,GAAI,CAMF,MAAME,GAHW,MAAMC,EAAY,gBAAiBF,CAAa,GAG3C,KAGlBC,GAAQ,CAACA,EAAK,QAGhBE,IAGAJ,EAAW,MAAK,EAInB,OAAQK,EAAK,CAGZN,EAAQM,EAGJN,EAAM,UAAYA,EAAM,SAAS,SAAW,KAC9CO,GAGH,CAGGP,GAASA,EAAM,UAAYA,EAAM,SAAS,SAAW,KACvDQ,GAGJ,CAIA,SAASD,GAAY,CAEnBE,EAAK,KAAK,CAER,MAAO,cAEP,KAAM,wBAEN,KAAM,OAEV,CAAG,CAEH,CAEA,SAASD,GAAe,CAEtBC,EAAK,KAAK,CAER,MAAO,WAEP,KAAM,8BAEN,KAAM,SAEV,CAAG,CAEH,CAEA,SAASJ,GAAc,CAErBI,EAAK,KAAK,CAER,MAAO,mDAEP,KAAM,6KAEN,KAAM,SAEV,CAAG,CAEH"}