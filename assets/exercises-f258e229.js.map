{"version":3,"file":"exercises-f258e229.js","sources":["../../src/js/exercises.js"],"sourcesContent":["import { getRequest } from './api-energy-flow';\nfunction checkURL() {\n  const currentURL = window.location.href;\n  const targetURL = 'index';\n  return currentURL.includes(targetURL);\n}\n\nconst isOnTargetPage = checkURL();\nif (isOnTargetPage) {\n  const subspecies = document.querySelector('.subspecies');\n  const navigationBtns = document.querySelector('.exercises-nav-panel');\n  const exercisesGallery = document.querySelector('.exercises-gallery');\n  const searchInput = document.querySelector('.exercises-nav-input');\n  const searchBlock = document.querySelector('.exercises-nav-input-block');\n  const searchBtn = document.querySelector('.input-search-icon');\n  const pagination = document.querySelector('.pagination');\n\n  let currentPage = 1;\n  let currentSubspecies = 'Muscles';\n  let lowerCurrentSubspecies;\n  let screenWidth = window.innerWidth;\n  let currentLimit = 0;\n  let currentLimitExercises = 0;\n  let currentValue = '';\n\n  if (screenWidth <= 375) {\n    currentLimit = 8;\n    currentLimitExercises = 8;\n  } else if (screenWidth <= 768) {\n    currentLimit = 12;\n    currentLimitExercises = 8;\n  } else {\n    currentLimit = 12;\n    currentLimitExercises = 9;\n  }\n\n  const params = {\n    filter: currentSubspecies,\n    page: currentPage,\n    limit: currentLimit,\n  };\n\n  const params2 = {\n    page: currentPage,\n    limit: currentLimitExercises,\n  };\n\n  //\n  function renderSubspecies(params) {\n    getRequest('/filters', params)\n      .then(data => {\n        const { page, totalPages, results } = data;\n        let subspeciesHtml = results.reduce(\n          (html, image) =>\n            html +\n            `<a class=\"subspecies-item\" href=\"\">\n  <button\n   type=\"button\"\n   data-value=\"${image.name}\"\n    class=\"subspecies-item-btn\"\n    style=\"\n      background: linear-gradient(\n          0deg,\n          rgba(16, 16, 16, 0.7) 0%,\n          rgba(16, 16, 16, 0.7) 100%\n        ),\n        url(${image.imgUrl}) lightgray -16.825px\n          0.844px / 121.36% 108.504% no-repeat;\n    \"\n  >\n  <p class=\"subspecies-item-name\">${image.name}</p>\n  <p class=\"subspecies-item-group\">${image.filter}</p>\n    </button>\n</a>`,\n          ''\n        );\n        subspecies.innerHTML = subspeciesHtml;\n\n        if (totalPages > 1) {\n          const pag = paginationPages(page, totalPages);\n          pagination.innerHTML = pag;\n        } else {\n          pagination.innerHTML = '';\n        }\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n  renderSubspecies(params);\n  //\n  navigationBtns.addEventListener('click', event => {\n    if (event.target.tagName === 'BUTTON') {\n      // Логіка для відображенян вибраного підвиду\n      Array.from(event.currentTarget.children).map(a => {\n        if (a.textContent !== event.target.textContent) {\n          a.classList.remove('exercises-button-isactive');\n        } else {\n          event.target.classList.add('exercises-button-isactive');\n        }\n      });\n      //\n      currentSubspecies = event.target.textContent.trim();\n      params.filter = currentSubspecies;\n      delete params2[lowerCurrentSubspecies];\n      renderSubspecies(params);\n      getPagination(params, renderSubspecies);\n      subspecies.classList.remove('is-hidden');\n      exercisesGallery.classList.add('is-hidden');\n      searchBlock.classList.add('is-hidden');\n    } else {\n      return;\n    }\n  });\n  // Слухач на картки з підвидами\n\n  subspecies.addEventListener('click', event => {\n    event.preventDefault();\n\n    if (event.target.tagName === 'BUTTON') {\n      currentValue = event.target.dataset.value;\n      lowerCurrentSubspecies = currentSubspecies.toLowerCase();\n      if (lowerCurrentSubspecies === 'body parts') {\n        lowerCurrentSubspecies = 'bodypart';\n      }\n      params2[lowerCurrentSubspecies] = currentValue;\n      console.log(params2);\n      subspecies.classList.add('is-hidden');\n      exercisesGallery.classList.remove('is-hidden');\n      searchBlock.classList.remove('is-hidden');\n      renderExercises(params2);\n      getPagination(params2, renderExercises);\n      console.log(params2);\n    }\n  });\n  // Слухач на інпут\n  searchBtn.addEventListener('click', event => {\n    params2.keyword = searchInput.value.trim();\n    renderExercises(params2);\n    getPagination(params2, renderExercises);\n    console.log(params2);\n    delete params2.keyword;\n    console.log(params2);\n  });\n  //функция для пагинации страниц\n  function paginationPages(page, totalPages) {\n    let paginationHtml = '';\n    for (let a = 1; a <= totalPages; a++) {\n      paginationHtml += `<button class=\"pagination-btn\" type=\"button\">${a}</button>`;\n    }\n    return paginationHtml;\n  }\n  // слухач при натисканні на старт, на картці з вправою, повертає її ID\n  function getExercisesId() {\n    exercisesGallery.addEventListener('click', event => {\n      event.preventDefault();\n      if (event.target.tagName === 'BUTTON') {\n        const liElement = event.target.dataset.action;\n        return liElement;\n      }\n    });\n  }\n  const ExercisesId = getExercisesId();\n  // Слухач по пагінації\n\n  function getPagination(param, callback) {\n    pagination.addEventListener('click', event => {\n      if (event.target.tagName === 'BUTTON') {\n        param.page = parseInt(event.target.textContent);\n        console.log(param);\n        callback(param);\n        param.page = 1;\n      }\n    });\n  }\n\n  // Функція для рендеру вправ\n\n  function renderExercises(param) {\n    getRequest('/exercises', param)\n      .then(data => {\n        console.log(data);\n        const { page, totalPages, results } = data;\n        if (Array.from(results).length === 0) {\n          console.log('Without result');\n        }\n        let ExercisesHtml = results.reduce(\n          (html, image) =>\n            html +\n            `<a class=\"exercises-gallery-item\" >\n  <div class=\"exercises-gallery-top\">\n    <div class=\"exercises-gallery-top-left\">\n      <p class=\"badge\">WORKOUT</p>\n      <label class=\"exercises-gallery-raiting\">${image.rating}</label\n      ><svg class=\"exercises-gallery-raiting-svg\" width=\"14\" height=\"13\">\n        <use href=\"../img/sprite.svg#star\"></use>\n      </svg>\n    </div>\n    <button class=\"exercises-gallery-btn-start\" data-action=\"${image._id}\" type=\"button\">\n      Start\n      <svg class=\"exercises-gallery-btn-icon\">\n        <use href=\"../img/sprite.svg#arrow\"></use>\n      </svg>\n    </button>\n  </div>\n  <div class=\"exercises-gallery-center\">\n    <svg class=\"exercises-gallery-center-icon\">\n      <use href=\"../img/Exercises/symbol-defs.svg#icon-icon\"></use>\n    </svg>\n    <label class=\"exercises-gallery-name\">${image.name}</label>\n  </div>\n  <ul class=\"exercises-gallery-bottom\">\n    <li class=\"exercises-gallery-bottom-point\">\n      Burned calories:<span class=\"exercises-gallery-bottom-point-value\"\n        >${image.burnedCalories} / 3 min</span\n      >\n    </li>\n    <li class=\"exercises-gallery-bottom-point\">\n      Body part:\n      <span class=\"exercises-gallery-bottom-point-value\"\n        >${image.bodyPart}</span\n      >\n    </li>\n    <li class=\"exercises-gallery-bottom-point\">\n      Target:<span class=\"exercises-gallery-bottom-point-value\"\n        >${image.target}</span\n      >\n    </li>\n  </ul>\n</a>`,\n          ''\n        );\n\n        exercisesGallery.innerHTML = ExercisesHtml;\n        if (totalPages > 1) {\n          const pag = paginationPages(page, totalPages);\n          pagination.innerHTML = pag;\n          pagination.removeEventListener('click', event => {\n            if (event.target.tagName === 'BUTTON') {\n              param.page = parseInt(event.target.textContent);\n              console.log(param);\n              callback(param);\n              param.page = 1;\n            }\n          });\n        } else {\n          pagination.innerHTML = '';\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n}\n"],"names":["checkURL","currentURL","targetURL","isOnTargetPage","renderSubspecies","params","getRequest","data","page","totalPages","results","subspeciesHtml","html","image","subspecies","pag","paginationPages","pagination","error","paginationHtml","a","getExercisesId","exercisesGallery","event","getPagination","param","callback","renderExercises","ExercisesHtml","navigationBtns","searchInput","searchBlock","searchBtn","currentPage","currentSubspecies","lowerCurrentSubspecies","screenWidth","currentLimit","currentLimitExercises","currentValue","params2"],"mappings":"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"}