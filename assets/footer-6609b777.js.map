{"version":3,"file":"footer-6609b777.js","sources":["../../src/js/footer.js"],"sourcesContent":["// Імпортуємо функцію для відправки запитів\nimport { postRequest } from './api-energy-flow';\n\n// Імпортуємо бібліотеку для відображення повідомлень\nimport Swal from 'sweetalert2';\n\n// Стилі для повідомлень\nimport 'sweetalert2/src/sweetalert2.scss';\n\n// Отримуємо шлях сторінки\nconst fullUrl = window.location.pathname;\n\n// Вирізаємо останню частину шляху\nconst lastSlashIndex = fullUrl.lastIndexOf('/');\nconst result = fullUrl.substring(lastSlashIndex);\n\n// Перевіряємо, що це головна сторінка\nif (result === '/index.html' || result === '/') {\n  // Знаходимо форму в футері\n  const footerForm = document.querySelector('#footer-form');\n\n  // Підписуємося на подію відправки форми\n  footerForm.addEventListener('submit', function (event) {\n    // Відміняємо дефолтну поведінку\n    event.preventDefault();\n\n    // Викликаємо функцію відправки запиту\n    submitForm();\n  });\n}\n\n// Функція відправки запиту\nasync function submitForm() {\n  // Змінна для збереження помилки\n  let error;\n\n  // Отримуємо форму\n  const footerForm = document.querySelector('#footer-form');\n\n  // Створюємо об'єкт з даними форми\n  const formData = new FormData(footerForm);\n\n  // Отримуємо значення email\n  const emailValue = formData.get('footer-email');\n\n  // Формуємо об'єкт для відправки\n  const formattedData = { email: `${emailValue}` };\n\n  try {\n    // Відправляємо POST запит\n    const response = await postRequest('/subscription', formattedData);\n    // Отримуємо дані з відповіді\n    const data = response.data;\n\n    // Перевіряємо, чи немає помилки\n    if (data && !data.error) {\n      // Показуємо повідомлення про успіх\n      showSuccess();\n\n      // Очищуємо форму\n      footerForm.reset();\n    }\n  } catch (err) {\n    // Зберігаємо помилку\n    error = err;\n\n    // Показуємо помилку, якщо статус не 409\n    if (error.response && error.response.status !== 409) {\n      showError();\n    }\n  }\n\n  // Перевіряємо, чи статус помилки 409\n  if (error && error.response && error.response.status === 409) {\n    showError409();\n  }\n}\n\nfunction showError() {\n  Swal.fire({\n    title: 'Bad request',\n\n    text: 'Something went wrong.',\n\n    icon: 'error',\n  });\n}\n\nfunction showError409() {\n  Swal.fire({\n    title: 'Warning!',\n\n    text: 'Subscription already exists',\n\n    icon: 'warning',\n  });\n}\n\nfunction showSuccess() {\n  Swal.fire({\n    title: 'Thank you for enrolling in our training program!',\n\n    text: 'We assure you of effective and top-notch training sessions that will exceed your expectations. Stick with us, and we guarantee you numerous exciting learning experiences.',\n\n    icon: 'success',\n  });\n}\n"],"names":["fullUrl","lastSlashIndex","result","event","submitForm","error","footerForm","formattedData","data","postRequest","showSuccess","err","showError","showError409","Swal"],"mappings":"qGAUA,MAAMA,EAAU,OAAO,SAAS,SAG1BC,EAAiBD,EAAQ,YAAY,GAAG,EACxCE,EAASF,EAAQ,UAAUC,CAAc,GAG3CC,IAAW,eAAiBA,IAAW,MAEtB,SAAS,cAAc,cAAc,EAG7C,iBAAiB,SAAU,SAAUC,EAAO,CAErDA,EAAM,eAAc,EAGpBC,GACJ,CAAG,EAIH,eAAeA,GAAa,CAE1B,IAAIC,EAGJ,MAAMC,EAAa,SAAS,cAAc,cAAc,EASlDC,EAAgB,CAAE,MAAO,GANd,IAAI,SAASD,CAAU,EAGZ,IAAI,cAAc,CAGF,EAAE,EAE9C,GAAI,CAIF,MAAME,GAFW,MAAMC,EAAY,gBAAiBF,CAAa,GAE3C,KAGlBC,GAAQ,CAACA,EAAK,QAEhBE,IAGAJ,EAAW,MAAK,EAEnB,OAAQK,EAAK,CAEZN,EAAQM,EAGJN,EAAM,UAAYA,EAAM,SAAS,SAAW,KAC9CO,GAEH,CAGGP,GAASA,EAAM,UAAYA,EAAM,SAAS,SAAW,KACvDQ,GAEJ,CAEA,SAASD,GAAY,CACnBE,EAAK,KAAK,CACR,MAAO,cAEP,KAAM,wBAEN,KAAM,OACV,CAAG,CACH,CAEA,SAASD,GAAe,CACtBC,EAAK,KAAK,CACR,MAAO,WAEP,KAAM,8BAEN,KAAM,SACV,CAAG,CACH,CAEA,SAASJ,GAAc,CACrBI,EAAK,KAAK,CACR,MAAO,mDAEP,KAAM,6KAEN,KAAM,SACV,CAAG,CACH"}