{"version":3,"file":"modal-dd9c76eb.js","sources":["../../src/js/modal.js"],"sourcesContent":["import { getRequest } from './api-energy-flow';\n\n// Show the exercise modal with the given exercise ID\nfunction showExerciseModal(exerciseId) {\n  const modal = document.getElementById('exerciseModal');\n  const backdrop = document.getElementById('modalBackdrop');\n\n  // Show both modal and backdrop\n  modal.classList.add('is-visible');\n  backdrop.classList.add('is-visible');\n\n  // Fetch and fill modal data\n  getRequest(`/exercises/${exerciseId}`)\n    .then(data => {\n      if (data && data.gifUrl) {\n        fillModalWithData(data);\n      } else {\n        console.error('Invalid data or missing gifUrl');\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching exercise data', error);\n    });\n}\n\n// Close the exercise modal\nfunction closeExerciseModal() {\n  const modal = document.getElementById('exerciseModal');\n  const backdrop = document.getElementById('modalBackdrop');\n\n  // Hide both modal and backdrop\n  modal.classList.remove('is-visible');\n  backdrop.classList.remove('is-visible');\n}\n\n// Fill the modal with data\nfunction fillModalWithData(data) {\n  const modal = document.getElementById('exerciseModal');\n  const backdrop = document.getElementById('modalBackdrop');\n  const modalContent = document.getElementById('exerciseDetails');\n\n  modalContent.innerHTML = '';\n\n  // Creating a DOM element for the modal window\n  const exerciseDetails = document.createElement('div');\n  exerciseDetails.innerHTML = `\n    <div class=\"exercise-details\">\n      <button id=\"closeButton\" class=\"close-button\">\n        <svg class=\"close-icon\" width=\"12\" height=\"12\" >\n          <use href=\"/energy-flow/assets/sprite-0567d6ea.svg#close\"></use>\n        </svg>\n      </button>\n      <div class=\"content-wrapper\">\n        <div class=\"left-section\">\n          <div class=\"exercise-image\">\n            <img src=\"${data.gifUrl}\" alt=\"${data.name}\" />\n          </div>\n        </div>\n        <div class=\"right-section\">\n          <div class=\"exercise-info\">\n            <h2 class=\"exercise-name\">${data.name}</h2>\n            <div class=\"star-container\">\n              <span class=\"rating-value\">${formatRating(data.rating)}</span>\n              <div class=\"star-rating\">${getStarRating(data.rating)}</div>\n            </div>\n            <div class=\"info-block\">\n              <hr class=\"section-divider-top\">\n              <p class=\"info-item\"><span class=\"info-label\">Target:</span> ${data.target}</p>\n              <p class=\"info-item\"><span class=\"info-label\">Body Part:</span> ${data.bodyPart}</p>\n              <p class=\"info-item\"><span class=\"info-label\">Equipment:</span> ${data.equipment}</p>\n              <p class=\"info-item\"><span class=\"info-label\">Popularity:</span> ${data.popularity}</p>\n              <p class=\"info-item\"><span class=\"info-label\">Burned calories:</span> ${data.burnedCalories}/${data.time} min</p>\n              <hr class=\"section-divider-bottom\">\n            </div>\n            <div class=\"exercise-description\">\n              <p>${data.description}</p>\n            </div>\n              <div class=\"action-buttons\">\n                  <button class=\"favorite-button\" id=\"favoriteButton\">\n                    <span>Add to Favorites</span>\n                    <svg class=\"heart-icon\" width=\"20\" height=\"20\" >\n                    <use href=\"/energy-flow/assets/sprite-0567d6ea.svg#heart\"></use>\n                    </svg>\n                  </button>\n                  <button class=\"rating-button\" data-action=\"${data._id}\">Give a Rating</button>\n              </div>\n          </div>\n        </div>\n      </div>\n    </div>`;\n\n  modalContent.appendChild(exerciseDetails);\n  modal.classList.add('is-visible');\n\n\n\n  const favoriteButton = document.getElementById('favoriteButton');\n\n  // Checking if the exercise is already in favorites\n  if (isExerciseFavorite(data._id)) {\n    setRemoveFromFavorites(favoriteButton);\n  }\n\n  // Adding event listener for the \"Favorite\" button\n  favoriteButton.addEventListener('click', () => {\n    if (isExerciseFavorite(data._id)) {\n      removeFromFavorites(data._id);\n      setAddToFavorites(favoriteButton);\n    } else {\n      addToFavorites(data);\n      setRemoveFromFavorites(favoriteButton);\n    }\n  });\n\n  // Adding event listener for the modal window container\n  backdrop.addEventListener('click', (event) => {\n    // Prevent the event from reaching the document level\n    event.stopPropagation();\n    closeExerciseModal();\n  });\n\n  const closeButton = document.getElementById('closeButton');\n  closeButton.addEventListener('click', () => {\n    closeExerciseModal();\n  });\n\n  // Adding event listener for closing the modal window with the \"Escape\" key\n  document.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"Escape\") {\n      closeExerciseModal();\n    }\n  });\n}\n\n// Format the rating value\nfunction formatRating(rating) {\n  return isNaN(rating) ? 'N/A' : Math.round(rating).toFixed(1);\n}\n\n// Generate the star rating SVG based on the given rating\nfunction getStarRating(rating) {\n  const filledStars = Math.round(rating);\n  const emptyStars = 5 - filledStars;\n  const filledStarSvg = `<svg class=\"star\" width=\"18\" height=\"18\" >\n    <use href=\"/energy-flow/assets/sprite-0567d6ea.svg#colorstar\"></use>\n  </svg>`;\n  const emptyStarSvg = `\n    <svg class=\"star empty-star\" width=\"18\" height=\"18\" >\n      <use href=\"/energy-flow/assets/sprite-0567d6ea.svg#star\"></use>\n    </svg>`;\n\n  let stars = '';\n\n  for (let i = 0; i < filledStars; i++) {\n    stars += filledStarSvg;\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    stars += emptyStarSvg;\n  }\n\n  return stars;\n}\n\n// Check if the exercise is already in favorites\nfunction isExerciseFavorite(exerciseId) {\n  const favorites = getFavorites();\n  return favorites.some(exercise => exercise._id === exerciseId);\n}\n\n// Get the list of favorite exercises from local storage\nfunction getFavorites() {\n  return JSON.parse(localStorage.getItem('favorites')) || [];\n}\n\n// Add the exercise to the list of favorites\nfunction addToFavorites(exercise) {\n  const favorites = getFavorites();\n  favorites.push(exercise);\n  localStorage.setItem('favorites', JSON.stringify(favorites));\n}\n\n// Remove the exercise from the list of favorites\nfunction removeFromFavorites(exerciseId) {\n  const favorites = getFavorites();\n  const updatedFavorites = favorites.filter(exercise => exercise._id !== exerciseId);\n\n  if (updatedFavorites.length > 0) {\n    localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n  } else {\n    localStorage.removeItem('favorites');\n  }\n}\n\n// Set the \"Remove from Favorites\" state for the button\nfunction setRemoveFromFavorites(button) {\n  const span = button.querySelector('span');\n  span.textContent = 'Remove from';\n  const use = button.querySelector('use');\n  use.setAttribute('href', '/energy-flow/assets/sprite-0567d6ea.svg#heart');\n}\n\n// Set the \"Add to Favorites\" state for the button\nfunction setAddToFavorites(button) {\n  const span = button.querySelector('span');\n  span.textContent = 'Add to Favorites';\n  const use = button.querySelector('use');\n  use.setAttribute('href', '/energy-flow/assets/sprite-0567d6ea.svg#heart');\n}\n\n// Added event listener for both the start and favorites buttons in the exercise gallery\ndocument.addEventListener('click', event => {\n  const clickedElement = event.target;\n\n  // Check if clicked on a button with class exercises-gallery-btn-start or favorites-btn-arrow\n  if (clickedElement.classList.contains('exercises-gallery-btn-start') || clickedElement.classList.contains('favorites-btn-arrow')) {\n    const exerciseId = clickedElement.dataset.action;\n    showExerciseModal(exerciseId, clickedElement.classList.contains('exercises-gallery-btn-start'));\n  }\n});\n\n\n\n\n\n\n"],"names":["showExerciseModal","exerciseId","modal","backdrop","getRequest","data","fillModalWithData","error","closeExerciseModal","modalContent","exerciseDetails","formatRating","getStarRating","favoriteButton","isExerciseFavorite","setRemoveFromFavorites","removeFromFavorites","setAddToFavorites","addToFavorites","event","rating","filledStars","emptyStars","filledStarSvg","emptyStarSvg","stars","i","getFavorites","exercise","favorites","updatedFavorites","button","span","clickedElement"],"mappings":"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"}