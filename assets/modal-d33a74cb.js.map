{"version":3,"file":"modal-d33a74cb.js","sources":["../../src/js/modal.js"],"sourcesContent":["import { getRequest } from './api-energy-flow';\nimport svgUrl from '../img/sprite.svg';\n\n// Show the exercise modal with the given exercise ID\nfunction showExerciseModal(exerciseId) {\n  const modal = document.getElementById('exerciseModal');\n  const backdrop = document.getElementById('modalBackdrop');\n\n  // Show both modal and backdrop\n  modal.classList.add('is-visible');\n  backdrop.classList.add('is-visible');\n\n  // Fetch and fill modal data\n  getRequest(`/exercises/${exerciseId}`)\n    .then(data => {\n      if (data && data.gifUrl) {\n        fillModalWithData(data);\n      } else {\n        console.error('Invalid data or missing gifUrl');\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching exercise data', error);\n    });\n}\n\n// Close the exercise modal\nfunction closeExerciseModal() {\n  const modal = document.getElementById('exerciseModal');\n  const backdrop = document.getElementById('modalBackdrop');\n\n  // Hide both modal and backdrop\n  modal.classList.remove('is-visible');\n  backdrop.classList.remove('is-visible');\n\n  location.reload();\n}\n\n// Fill the modal with data\nfunction fillModalWithData(data) {\n  const modal = document.getElementById('exerciseModal');\n  const backdrop = document.getElementById('modalBackdrop');\n  const modalContent = document.getElementById('exerciseDetails');\n\n  modalContent.innerHTML = '';\n\n  // Creating a DOM element for the modal window\n  const exerciseDetails = document.createElement('div');\n  exerciseDetails.innerHTML = `\n    <div class=\"exercise-details\">\n      <button id=\"closeButton\" class=\"close-button\">\n      <svg class=\"close-icon\" width=\"12\" height=\"12\" >\n      <use href=\"${svgUrl}#close\"></use>\n        </svg>\n      </button>\n      <div class=\"content-wrapper\">\n        <div class=\"left-section\">\n          <div class=\"exercise-image\">\n            <img src=\"${data.gifUrl}\" alt=\"${data.name}\" />\n          </div>\n        </div>\n        <div class=\"right-section\">\n          <div class=\"exercise-info\">\n            <h2 class=\"exercise-name\">${data.name}</h2>\n            <div class=\"star-container\">\n              <span class=\"rating-value\">${formatRating(data.rating)}</span>\n              <div class=\"star-rating\">${getStarRating(data.rating)}</div>\n            </div>\n            <div class=\"info-block\">\n              <hr class=\"section-divider-top\">\n              <p class=\"info-item\"><span class=\"info-label\">Target:</span> ${\n                data.target\n              }</p>\n              <p class=\"info-item\"><span class=\"info-label\">Body Part:</span> ${\n                data.bodyPart\n              }</p>\n              <p class=\"info-item\"><span class=\"info-label\">Equipment:</span> ${\n                data.equipment\n              }</p>\n              <p class=\"info-item\"><span class=\"info-label\">Popularity:</span> ${\n                data.popularity\n              }</p>\n              <p class=\"info-item\"><span class=\"info-label\">Burned calories:</span> ${\n                data.burnedCalories\n              }/${data.time} min</p>\n              <hr class=\"section-divider-bottom\">\n            </div>\n            <div class=\"exercise-description\">\n              <p>${data.description}</p>\n            </div>\n              <div class=\"action-buttons\">\n                  <button class=\"favorite-button\" id=\"favoriteButton\">\n                    <span>Add to Favorites</span>\n                    <svg class=\"heart-icon\" width=\"20\" height=\"20\" >\n                    <use href=\"${svgUrl}#heart\"></use>\n                    </svg>\n\n                  </button>\n                  <button class=\"rating-button\"  data-action=\"${\n                    data._id\n                  }\">Give a Rating</button>\n              </div>\n          </div>\n        </div>\n      </div>\n    </div>`;\n\n  modalContent.appendChild(exerciseDetails);\n  modal.classList.add('is-visible');\n\n  const favoriteButton = document.getElementById('favoriteButton');\n\n  // Checking if the exercise is already in favorites\n  if (isExerciseFavorite(data._id)) {\n    setRemoveFromFavorites(favoriteButton);\n  }\n\n  // Adding event listener for the \"Favorite\" button\n  favoriteButton.addEventListener('click', () => {\n    if (isExerciseFavorite(data._id)) {\n      removeFromFavorites(data._id);\n      setAddToFavorites(favoriteButton);\n    } else {\n      addToFavorites(data);\n      setRemoveFromFavorites(favoriteButton);\n    }\n  });\n\n  // Adding event listener for the modal window container\n  backdrop.addEventListener('click', event => {\n    // Prevent the event from reaching the document level\n    event.stopPropagation();\n    closeExerciseModal();\n  });\n\n  const closeButton = document.getElementById('closeButton');\n  closeButton.addEventListener('click', () => {\n    closeExerciseModal();\n  });\n\n  // Adding event listener for closing the modal window with the \"Escape\" key\n  document.addEventListener('keydown', event => {\n    if (event.key === 'Escape') {\n      closeExerciseModal();\n    }\n  });\n}\n\n// Format the rating value\n// function formatRating(rating) {\n//   return isNaN(rating) ? 'N/A' : Math.round(rating).toFixed(1);\n// }\n\nfunction formatRating(rating) {\n  return isNaN(rating) ? 'N/A' : rating.toFixed(1);\n}\n\n// Generate the star rating SVG based on the given rating\nfunction getStarRating(rating) {\n  const filledStars = Math.round(rating);\n  const emptyStars = 5 - filledStars;\n  const filledStarSvg = `<svg class=\"star\" width=\"18\" height=\"18\" >\n    <use href=\"${svgUrl}#colorstar\"></use>\n  </svg>`;\n  // const filledStarSvg = `<svg class=\"star\" width=\"18\" height=\"18\" viewBox=\"0 0 34 32\">\n  //   <path fill=\"#EEA10C\" d=\"M15.24 1.561c.504-1.552 2.699-1.552 3.204 0l2.558 7.872a1.684 1.684 0 0 0 1.602 1.164h8.277c1.632 0 2.31 2.088.99 3.047l-6.696 4.865a1.685 1.685 0 0 0-.612 1.883l2.558 7.872c.504 1.552-1.272 2.842-2.592 1.883l-6.696-4.865a1.684 1.684 0 0 0-1.98 0l-6.696 4.865c-1.32.959-3.096-.331-2.592-1.883l2.558-7.872a1.685 1.685 0 0 0-.612-1.883l-6.696-4.865c-1.32-.959-.642-3.047.99-3.047h8.277c.73 0 1.376-.47 1.602-1.164l2.558-7.872z\" style=\"fill:var(--color1, #EEA10C)\"/>\n  // </svg>`;\n  const emptyStarSvg = `\n    <svg class=\"star empty-star\" width=\"18\" height=\"18\" >\n      <use href=\"${svgUrl}#star\"></use>\n    </svg>`;\n  // const emptyStarSvg = `\n  // <svg class=\"star empty-star\" width=\"18\" height=\"18\" viewBox=\"0 0 34 32\">\n  //   <path d=\"M15.24 1.561c.504-1.552 2.699-1.552 3.204 0l2.558 7.872a1.684 1.684 0 0 0 1.602 1.164h8.277c1.632 0 2.31 2.088.99 3.047l-6.696 4.865a1.685 1.685 0 0 0-.612 1.883l2.558 7.872c.504 1.552-1.272 2.842-2.592 1.883l-6.696-4.865a1.684 1.684 0 0 0-1.98 0l-6.696 4.865c-1.32.959-3.096-.331-2.592-1.883l2.558-7.872a1.685 1.685 0 0 0-.612-1.883l-6.696-4.865c-1.32-.959-.642-3.047.99-3.047h8.277c.73 0 1.376-.47 1.602-1.164l2.558-7.872z\" />\n  // </svg>`;\n\n  let stars = '';\n\n  for (let i = 0; i < filledStars; i++) {\n    stars += filledStarSvg;\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    stars += emptyStarSvg;\n  }\n\n  return stars;\n}\n\n// Check if the exercise is already in favorites\nfunction isExerciseFavorite(exerciseId) {\n  const favorites = getFavorites();\n  return favorites.some(exercise => exercise._id === exerciseId);\n}\n\n// Get the list of favorite exercises from local storage\nfunction getFavorites() {\n  return JSON.parse(localStorage.getItem('favorites')) || [];\n}\n\n// Add the exercise to the list of favorites\nfunction addToFavorites(exercise) {\n  const favorites = getFavorites();\n  favorites.push(exercise);\n  localStorage.setItem('favorites', JSON.stringify(favorites));\n}\n\n// Remove the exercise from the list of favorites\nfunction removeFromFavorites(exerciseId) {\n  const favorites = getFavorites();\n  const updatedFavorites = favorites.filter(\n    exercise => exercise._id !== exerciseId\n  );\n\n  if (updatedFavorites.length > 0) {\n    localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n  } else {\n    localStorage.removeItem('favorites');\n  }\n}\n\n// Set the \"Remove from Favorites\" state for the button\nfunction setRemoveFromFavorites(button) {\n  const span = button.querySelector('span');\n  span.textContent = 'Remove from';\n  const use = button.querySelector('use');\n  use.setAttribute('href', `${svgUrl}#heart`);\n  // use.setAttribute(\n  //   'href',\n  //   '<path fill=\"none\" stroke=\"#f6f6f6\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2.4\" d=\"M27.787 6.147a7.345 7.345 0 0 0-5.187-2.15 7.33 7.33 0 0 0-5.187 2.15L16 7.56l-1.413-1.413a7.333 7.333 0 0 0-10.374 0 7.333 7.333 0 0 0 0 10.374L16 28.308l11.787-11.787a7.345 7.345 0 0 0 2.15-5.187 7.33 7.33 0 0 0-2.15-5.187z\" style=\"stroke:var(--color3, #f6f6f6)\"/>'\n  // );\n}\n\n// Set the \"Add to Favorites\" state for the button\nfunction setAddToFavorites(button) {\n  const span = button.querySelector('span');\n  span.textContent = 'Add to Favorites';\n  const use = button.querySelector('use');\n  use.setAttribute('href', `${svgUrl}#heart`);\n  // use.setAttribute(\n  //   'href',\n  //   '<path fill=\"none\" stroke=\"#f6f6f6\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2.4\" d=\"M27.787 6.147a7.345 7.345 0 0 0-5.187-2.15 7.33 7.33 0 0 0-5.187 2.15L16 7.56l-1.413-1.413a7.333 7.333 0 0 0-10.374 0 7.333 7.333 0 0 0 0 10.374L16 28.308l11.787-11.787a7.345 7.345 0 0 0 2.15-5.187 7.33 7.33 0 0 0-2.15-5.187z\" style=\"stroke:var(--color3, #f6f6f6)\"/>'\n  // );\n}\n\n// Added event listener for both the start and favorites buttons in the exercise gallery\ndocument.addEventListener('click', event => {\n  const clickedElement = event.target;\n\n  // Check if clicked on a button with class exercises-gallery-btn-start or favorites-btn-arrow\n  if (\n    clickedElement.classList.contains('exercises-gallery-btn-start') ||\n    clickedElement.classList.contains('favorites-btn-arrow')\n  ) {\n    const exerciseId = clickedElement.dataset.action;\n    showExerciseModal(\n      exerciseId,\n      clickedElement.classList.contains('exercises-gallery-btn-start')\n    );\n  }\n});\n"],"names":["showExerciseModal","exerciseId","modal","backdrop","getRequest","data","fillModalWithData","error","closeExerciseModal","modalContent","exerciseDetails","svgUrl","formatRating","getStarRating","favoriteButton","isExerciseFavorite","setRemoveFromFavorites","removeFromFavorites","setAddToFavorites","addToFavorites","event","rating","filledStars","emptyStars","filledStarSvg","emptyStarSvg","stars","i","getFavorites","exercise","favorites","updatedFavorites","button","span","clickedElement"],"mappings":"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"}